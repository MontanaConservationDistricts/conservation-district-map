---
layout: layouts/base.njk
section: home
---

 <div id="map"></div>

   <style type="text/css">
    	
      #map { height: 500px; }

   </style>

   {# <script src="{{ '_includes/assets/js/district-boundaries_simplified2.geojson' | url }}" defer></script> #}

   <script type="text/javascript">
      
      var map = L.map('map').setView([46.85, -109.45], 5);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
         maxZoom: 19,
         attribution: 'Â© OpenStreetMap'
      }).addTo(map);


      // var districtBoundaries = new L.GeoJSON.AJAX("_includes/assets/js/district-boundaries_simplified.geojson");
      // districtBoundaries.on('data:loaded', function() {

      //    map.addLayer(this);
      //    console.log(this);
      // });


        // load GeoJSON from an external file
        $.getJSON("_includes/assets/js/district-boundaries_simplified.geojson",function(data){
          // add GeoJSON layer to the map once the file is loaded
          L.geoJson(data, {
              onEachFeature: function (feature, layer) {
                  layer.on('click', showName);

                  //POPUPS
                  var popupContent = '<table>';
                  for (var p in feature.properties) {
                      popupContent += '<tr><td>' + p + '</td><td>'+ feature.properties[p] + '</td></tr>';
                  }
                  popupContent += '</table>';
                  layer.bindPopup(popupContent).openPopup();
              }
          }).addTo(map);
          console.log(data);
        });

        function showName(e) {
             console.log(e.target.feature.properties.DISTRICT_N);
             var targetDistrict = e.target.feature.properties.DISTRICT_N;
         }


   </script>

{% set postslist = collections.post %}
{{ collections.post | log }}


<section>
   {% for post in postslist | reverse %}

      <article{% if post.url == url %} data-current="current item"{% endif %}>
         <h3>
            <a href="{{ post.url | url }}">
               {% if post.data.title %}
                  {{ post.data.title }}
               {% else %}
                  Untitled
               {% endif %}
            </a>
         </h3>
         {% if post.data.summary %}
            <p>
               {{ post.data.summary }}
            </p>
         {% endif %}
         <p>
            <time datetime="{{ post.date | machineDate }}">
               <small>{{ post.date | readableDate }} by <a href="/authors/{{ post.data.author | slug }}/">{{ post.data.author }}</a></small>
            </time>
         </p>
         {% if post.data.tags %}
            <p>
               {% for tag in post.data.tags %}
               {%- if tag != "post" -%}
                  {% set tagUrl %}/tags/{{ tag }}/{% endset %}
               <a href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
               {%- endif -%}
               {% endfor %}
            </p>
         {% endif %}
      </article>
   {% endfor %}
</section>


{{ layoutContent | safe }}

